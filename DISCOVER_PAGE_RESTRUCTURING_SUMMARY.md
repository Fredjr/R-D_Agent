# Discover Page Restructuring Summary

**Date**: 2025-11-28  
**Status**: Assessment Complete - Awaiting Additional Mockups  
**Next**: Review Collections, Projects, Lab mockups before implementation

---

## ğŸ¯ **What We're Building: Unified Discovery Experience**

A **3-tab discovery interface** that consolidates search, triage, and hypothesis testing into one powerful workflow.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        DISCOVER                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Smart Inbox 12]  [Explore]  [All Papers]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  TAB 1: SMART INBOX                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚Total: 47â”‚Must: 12 â”‚Nice: 28 â”‚Ignore: 7â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                         â”‚
â”‚  [â˜‘] Paper Title          [MUST READ]  [95/100]       â”‚
â”‚      Authors â€¢ Year â€¢ Journal â€¢ PMID                   â”‚
â”‚      Abstract...                                       â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚      â”‚ ğŸ”— Evidence Links               â”‚              â”‚
â”‚      â”‚ Supports 2 hypotheses...        â”‚              â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚      [Save] [PDF] [Deep Dive] [Network] [Protocol]    â”‚
â”‚                                                         â”‚
â”‚  TAB 2: EXPLORE (Hypothesis Testing)                   â”‚
â”‚  PROJECT:       [Type 2 Diabetes...]                   â”‚
â”‚  COLLECTION:    [GLP-1 Agonists Research]              â”‚
â”‚  SUB-HYPOTHESIS: [Tirzepatide superior...]             â”‚
â”‚                                                         â”‚
â”‚  Current Hypothesis: "Tirzepatide shows superior..."   â”‚
â”‚  18 papers â€¢ 12 relevant (67%) â€¢ Status: Supported 92% â”‚
â”‚  [Find Papers] [Generate Report]                       â”‚
â”‚                                                         â”‚
â”‚  TAB 3: ALL PAPERS (Search Results)                    â”‚
â”‚  [Search: type 2 diabetes new treatment] [Search]      â”‚
â”‚  Showing 127 results                                   â”‚
â”‚                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ ğŸ¤– AI Summary                       â”‚              â”‚
â”‚  â”‚ Key Finding | Consensus | Trends    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                         â”‚
â”‚  [Paper cards...]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š **Current vs Target Comparison**

### **Current State** (Fragmented Discovery)

```
/search
â”œâ”€â”€ Search bar
â”œâ”€â”€ Advanced filters
â”œâ”€â”€ Search results
â””â”€â”€ Save to collections

/discover
â”œâ”€â”€ AI recommendations (4 categories)
â”œâ”€â”€ Papers for You
â”œâ”€â”€ Trending in Field
â”œâ”€â”€ Cross-Pollination
â””â”€â”€ Citation Opportunities

/project/[id]/papers/inbox
â”œâ”€â”€ Smart Inbox (hidden in project)
â”œâ”€â”€ Triage stats
â”œâ”€â”€ Paper cards with triage
â””â”€â”€ Evidence links

/project/[id]/research/hypotheses
â”œâ”€â”€ Hypothesis list
â”œâ”€â”€ Create/edit hypotheses
â”œâ”€â”€ Link evidence
â””â”€â”€ Status tracking
```

**Problem**: Discovery features scattered across 4 different locations.

### **Target State** (Unified Discovery)

```
/discover
â”œâ”€â”€ Smart Inbox Tab (Badge: 12)
â”‚   â”œâ”€â”€ Global triage across all projects
â”‚   â”œâ”€â”€ Triage stats (4 boxes)
â”‚   â”œâ”€â”€ Batch mode + keyboard shortcuts
â”‚   â””â”€â”€ Paper cards with checkboxes
â”‚
â”œâ”€â”€ Explore Tab
â”‚   â”œâ”€â”€ Hypothesis cascade (3 levels)
â”‚   â”œâ”€â”€ Hypothesis info + stats
â”‚   â”œâ”€â”€ Find papers for hypothesis
â”‚   â””â”€â”€ Generate report
â”‚
â””â”€â”€ All Papers Tab
    â”œâ”€â”€ Search bar
    â”œâ”€â”€ AI Summary (3 columns)
    â””â”€â”€ Search results
```

**Solution**: All discovery in one place with 3 clear modes.

---

## ğŸ”„ **3 Discovery Modes**

### **Mode 1: Smart Inbox** ğŸ“¥ (Triage Mode)

**Purpose**: AI-powered paper triage to focus on what matters

**Key Features**:
- âœ… **Triage Stats**: Total (47), Must Read (12), Nice to Know (28), Ignored (7)
- âœ… **Batch Mode**: Bulk operations on selected papers
- âœ… **Keyboard Shortcuts**: A (Accept), R (Reject), M (Maybe), D (Mark Read)
- âœ… **Relevance Scores**: 95/100 (color-coded)
- âœ… **Evidence Links**: Shows which hypotheses each paper supports
- âœ… **Checkboxes**: Multi-select papers
- âœ… **5 Actions**: Save, Read PDF, Deep Dive, Network View, Extract Protocol

**Current Location**: `/project/[id]/papers/inbox` (hidden)  
**Target Location**: `/discover?tab=inbox` (prominent)

**Change**: Elevate from project-specific to global discovery tool.

---

### **Mode 2: Explore** ğŸ” (Hypothesis Testing Mode)

**Purpose**: Test hypotheses by finding supporting/refuting evidence

**Key Features**:
- â• **Hypothesis Cascade**: 3-level dropdown
  - Level 1: PROJECT (e.g., "Type 2 Diabetes Therapeutic Approaches")
  - Level 2: COLLECTION (e.g., "GLP-1 Agonists Research")
  - Level 3: SUB-HYPOTHESIS (e.g., "Tirzepatide superior to Semaglutide")
- â• **Hypothesis Info**: Current hypothesis text + stats
  - Papers in collection: 18
  - Relevant: 12 (67%)
  - Status: Strongly Supported (92%)
- â• **Find Papers**: Search for papers supporting hypothesis
- â• **Generate Report**: Create report from hypothesis evidence

**Current Location**: No direct equivalent (hypotheses in project workspace)  
**Target Location**: `/discover?tab=explore` (new)

**Change**: NEW FEATURE - hypothesis-driven discovery workflow.

---

### **Mode 3: All Papers** ğŸ“„ (Search Mode)

**Purpose**: Search PubMed and get AI-powered summaries

**Key Features**:
- âœ… **Search Bar**: MeSH autocomplete
- â• **AI Summary**: Gradient box with 3 columns
  - **Key Finding**: Main takeaway from results
  - **Consensus**: What researchers agree on
  - **Emerging Trends**: New directions in field
- âœ… **Search Results**: Paper cards with standard actions
- â“ **Advanced Filters**: (not shown in mockup - decision needed)

**Current Location**: `/search` (separate page)  
**Target Location**: `/discover?tab=all-papers` (integrated)

**Change**: Merge search into Discover + add AI summarization.

---

## ğŸ¨ **Visual Design Changes**

### **Paper Card Enhancement**

**Before**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Title                      Score: 95    â”‚
â”‚ Authors â€¢ Year â€¢ Journal               â”‚
â”‚ Abstract...                            â”‚
â”‚ Evidence: Hypothesis links             â”‚
â”‚ [Save] [PDF] [Deep Dive]               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**After**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [â˜‘] Title  [MUST READ]  [95/100]       â”‚
â”‚     Authors â€¢ Year â€¢ Journal â€¢ PMID    â”‚
â”‚     Abstract...                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚     â”‚ ğŸ”— Evidence Links               â”‚â”‚
â”‚     â”‚ Supports 2 hypotheses...        â”‚â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚     [Save] [PDF] [Deep Dive] [Network] â”‚
â”‚     [Extract Protocol]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Changes**:
- â• Checkbox for multi-select
- â• Triage badge (MUST READ/NICE TO KNOW/IGNORED)
- â• Evidence links in highlighted box
- â• More action buttons (5 vs 3)
- âœ… Larger, color-coded relevance score

### **Triage Stats Enhancement**

**Before** (inline text):
```
Total: 47  |  Must Read: 12  |  Nice to Know: 28  |  Ignored: 7
```

**After** (card grid):
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Total   â”‚  â”‚Must Read â”‚  â”‚Nice to   â”‚  â”‚ Ignored  â”‚
â”‚    47    â”‚  â”‚    12    â”‚  â”‚  Know 28 â”‚  â”‚    7     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Changes**:
- âœ… Card-based layout (more visual)
- âœ… Hover/active states
- âœ… Clickable filters

---

## ğŸ—ï¸ **Technical Architecture Changes**

### **Route Consolidation**

**Before** (4 separate locations):
```
/search                           â†’ Search
/discover                         â†’ Recommendations
/project/[id]/papers/inbox        â†’ Smart Inbox
/project/[id]/research/hypotheses â†’ Hypotheses
```

**After** (1 unified page):
```
/discover
  â”œâ”€â”€ ?tab=inbox      â†’ Smart Inbox (default)
  â”œâ”€â”€ ?tab=explore    â†’ Hypothesis testing
  â””â”€â”€ ?tab=all-papers â†’ Search results
```

### **New API Endpoints**

1. **`GET /discover/inbox`** - Global Smart Inbox
   ```json
   {
     "stats": {"total": 47, "must_read": 12, "nice_to_know": 28, "ignored": 7},
     "papers": [...]
   }
   ```

2. **`GET /discover/hypothesis-cascade`** - Hierarchy data
   ```json
   {
     "projects": [
       {
         "id": "...",
         "name": "Type 2 Diabetes...",
         "collections": [
           {
             "id": "...",
             "name": "GLP-1 Agonists",
             "hypotheses": [...]
           }
         ]
       }
     ]
   }
   ```

3. **`POST /discover/find-papers`** - Hypothesis-driven search
   ```json
   {
     "hypothesis_id": "...",
     "limit": 50
   }
   ```

4. **`POST /search/ai-summary`** - AI search summarization
   ```json
   {
     "query": "type 2 diabetes new treatment",
     "results": [...]
   }
   ```

### **Component Architecture**

**New Components**:
- `DiscoverTabs` - 3-tab navigation with badges
- `SmartInboxTab` - Elevated Smart Inbox
- `ExploreTab` - Hypothesis cascade interface
- `AllPapersTab` - Search + AI summary
- `HypothesisCascade` - 3-level dropdown selector
- `AISearchSummary` - Gradient summary box
- `PaperCardWithCheckbox` - Enhanced paper card
- `TriageStatsGrid` - 4-box stat display
- `KeyboardShortcutsDisplay` - Shortcut hints

---

## ğŸ“‹ **Implementation Checklist**

### **Phase 1: Tab Structure** (2-3 days)
- [ ] Create `/discover` page with 3 tabs
- [ ] Add tab badges (unread counts)
- [ ] Tab switching logic
- [ ] URL state management (?tab=inbox)

### **Phase 2: Smart Inbox Tab** (3-4 days)
- [ ] Migrate Smart Inbox from project workspace
- [ ] Create global inbox view (all projects)
- [ ] Add checkboxes to paper cards
- [ ] Display keyboard shortcuts
- [ ] Enhance triage stats grid
- [ ] Test batch operations

### **Phase 3: Explore Tab** (4-5 days)
- [ ] Create hypothesis cascade component
- [ ] Build 3-level dropdown (Project â†’ Collection â†’ Hypothesis)
- [ ] Fetch cascade data from API
- [ ] Display hypothesis info + stats
- [ ] Implement "Find Papers" action
- [ ] Link "Generate Report" to existing feature

### **Phase 4: All Papers Tab** (2-3 days)
- [ ] Merge search bar into tab
- [ ] Migrate search results display
- [ ] Keep advanced filters (or remove - decision needed)
- [ ] Test search functionality

### **Phase 5: AI Summary** (1-2 days)
- [ ] Create AI summary component
- [ ] Build 3-column grid layout
- [ ] Create backend endpoint for summarization
- [ ] Integrate with search results

### **Phase 6: Testing & Polish** (2-3 days)
- [ ] Test all 3 tabs
- [ ] Test tab switching
- [ ] Test keyboard shortcuts
- [ ] Mobile responsiveness
- [ ] Animations and transitions
- [ ] User acceptance testing

**Total Estimated Effort**: 12-18 days

---

## âš ï¸ **Key Decisions Needed**

1. **Smart Inbox Scope**: 
   - Option A: Global (all projects) - simpler
   - Option B: Project-specific with selector - more control
   - **Recommendation**: Start with global, add project filter later

2. **Advanced Search Filters**:
   - Option A: Keep in All Papers tab
   - Option B: Remove (not in mockup)
   - **Recommendation**: Keep but collapse by default

3. **Current Recommendations Page**:
   - Option A: Remove entirely
   - Option B: Move to sub-section in Discover
   - **Recommendation**: Keep as 4th tab or sub-section

4. **Search History & Saved Searches**:
   - Option A: Keep in All Papers tab
   - Option B: Remove
   - **Recommendation**: Keep but move to dropdown menu

---

## âœ… **Success Criteria**

1. âœ… All discovery features accessible from `/discover`
2. âœ… Smart Inbox elevated to main navigation
3. âœ… Hypothesis testing integrated into discovery
4. âœ… AI summary enhances search results
5. âœ… Tab badges show unread counts
6. âœ… Keyboard shortcuts work in Smart Inbox
7. âœ… No features lost from current implementation
8. âœ… Mobile experience remains smooth

---

**Status**: âœ… **DISCOVER PAGE ANALYSIS COMPLETE**  
**Awaiting**: Collections, Projects, Lab page mockups


